<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saldo Calculator</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        .hidden { display: none; }
    </style>
</head>
<body class="bg-light">
    <div class="container mt-5">
        <h1 class="text-center mb-4">Vacation Days Calculator</h1>
        <form id="saldoForm" class="bg-white p-4 rounded shadow-sm">
            <div class="form-group">
                <label for="dateTo">To Date:</label>
                <input type="date" class="form-control" id="dateTo" name="dateTo" required>
            </div>
            
            <div class="form-group">
                <label for="currentSaldo">Current Saldo:</label>
                <input type="number" class="form-control" id="currentSaldo" name="currentSaldo" step="0.01" required>
            </div>
            
            <div class="form-group">
                <label for="workingDaysPerWeek">Working Days Per Week:</label>
                <input type="number" class="form-control" id="workingDaysPerWeek" name="workingDaysPerWeek" required>
            </div>
            
            <div class="form-check mb-3">
                <input type="checkbox" class="form-check-input" id="worksLessThanMonth" name="worksLessThanMonth">
                <label class="form-check-label" for="worksLessThanMonth">Work less than a month</label>
            </div>
            
            <div id="dateFromContainer" class="form-group hidden">
                <label for="additionalDateFrom">From Date:</label>
                <input type="date" class="form-control" id="additionalDateFrom" name="additionalDateFrom">
            </div>

            <button type="button" class="btn btn-primary" onclick="calculateSaldo()">Calculate</button>
        </form>

        <h2 class="text-center mt-5">Result:</h2>
        <pre id="result" class="bg-white p-4 rounded shadow-sm"></pre>
    </div>

    <script>
        document.getElementById('worksLessThanMonth').addEventListener('change', function() {
            const dateFromContainer = document.getElementById('dateFromContainer');
            if (this.checked) {
                dateFromContainer.classList.remove('hidden');
            } else {
                dateFromContainer.classList.add('hidden');
                document.getElementById('additionalDateFrom').value = '';
            }
        });

        function calculateSaldo() {
            const dateTo = document.getElementById('dateTo').value;
            const currentSaldo = parseFloat(document.getElementById('currentSaldo').value);
            const workingDaysPerWeek = parseInt(document.getElementById('workingDaysPerWeek').value);
            const worksLessThanMonth = document.getElementById('worksLessThanMonth').checked;
            const additionalDateFrom = document.getElementById('additionalDateFrom').value;

            if (!dateTo || isNaN(currentSaldo) || isNaN(workingDaysPerWeek)) {
                alert('Please fill all required fields.');
                return;
            }

            const vacDaysInYear = workingDaysPerWeek * 5;
            const vacDaysInMonth = (vacDaysInYear / 12).toFixed(2);
            const dateToObj = new Date(dateTo);
            const currentMonth = new Date().getMonth() + 1;
            const monthsBetween = dateToObj.getMonth() + 1 - currentMonth;
            const daysInTheLastMonth = new Date(dateToObj.getFullYear(), dateToObj.getMonth() + 1, 0).getDate();

            let multiplyFactor;
            if (worksLessThanMonth) {
                const additionalDateFromObj = new Date(additionalDateFrom);
                const daysWorkedInMonth = dateToObj.getDate() - additionalDateFromObj.getDate();
                multiplyFactor = daysWorkedInMonth;
            } else {
                multiplyFactor = dateToObj.getDate();
            }
            const vacDaysInTheLastMonth = ((vacDaysInMonth / daysInTheLastMonth) * multiplyFactor).toFixed(10);
            const vacDaysInt = (vacDaysInMonth * monthsBetween).toFixed(2);
            const vacDaysTotal = (parseFloat(vacDaysInTheLastMonth) + parseFloat(vacDaysInt)).toFixed(2);
            const saldoResult = (parseFloat(vacDaysTotal) + currentSaldo).toFixed(2);

            const result = `

Vacation Days in a Year: ${vacDaysInYear}
Vacation Days per Month: ${vacDaysInMonth}
Months Between: ${monthsBetween}
Days in the Last Month: ${daysInTheLastMonth}
Worked Less Than a Month: ${worksLessThanMonth}
Vacation Days in the Last Month: ${vacDaysInTheLastMonth}
Total Vacation Days: ${vacDaysTotal}
Saldo Result: ${saldoResult}
`;

            document.getElementById('result').textContent = result;
        }
    </script>
</body>
</html>
